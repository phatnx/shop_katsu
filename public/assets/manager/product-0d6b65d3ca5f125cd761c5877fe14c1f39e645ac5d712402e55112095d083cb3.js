function Product(e){var t=this,o={template:{product:$("#list-product-template"),search:$("#list-search-template"),more_products:$("#list-more-product-template"),quick_review:$("#list-detail-quick-review-template")},api:{product:"/api/v1/product",search:"/api/v1/search",delete_order:"/api/v1/delete_order",load_more_product:"/api/v1/load_more_product",quick_review:"/api/v1/quick-review",api_token:Cookies.get("api_token")},data:{}};t.settings=$.extend({},o,e),t.searchProduct=function(){$(".in-search").keypress(function(){13==event.keyCode&&(search=$(this).val(),$.ajax({url:t.settings.api.search,headers:{Authorization:"Bearer "+t.settings.api.api_token},type:"POST",data:{search:search},dataType:"json",success:function(e){if(200==e.code){$(".padding-right").html(""),$("#cart_items").html(""),$("#do_action").html("");var o=Handlebars.compile(t.settings.template.search.html());$(".padding-right").append(o({products:e.data.products,keyword:search})),$("#cart_items").append(o({products:e.data.products,keyword:search})),$("html, body").animate({scrollTop:$(".features_items").offset().top},1e3)}else console.log("error")},error:function(){}}))})},check_i18n=function(){return"/en"===window.location.pathname.substr(window.location.pathname.indexOf("/en"),3)},t.Productofmonth=function(){$("#submit").off().on("click",function(){var e=new Date($("#start").val()),o=e.getMonth()+1,r=e.getFullYear();$.ajax({url:t.settings.api.product,headers:{Authorization:"Bearer "+t.settings.api.api_token},type:"POST",data:{token:t.settings.api.api_token,month:o,year:r},dataType:"json",success:function(e){if(200==e.code){$(".tbody").html("");let r=e.data.carts_order.reduce((e,t)=>e+t.total,0);e.data.carts_order.length>0?($(".total_order_of_month").css("display","block"),check_i18n()?$(".total_order_of_month").get(0).innerText="Total money order (include fee ship & voucher code ) of month is $"+parseFloat(r+parseFloat(e.data.fee_ship)):$(".total_order_of_month").get(0).innerText="T\u1ed5ng ti\u1ec1n \u0111\u1eb7t h\xe0ng (bao g\u1ed3m ph\xed ship & m\xe3 gi\u1ea3m gi\xe1) trong th\xe1ng l\xe0 $"+parseFloat(r+parseFloat(e.data.fee_ship))):$(".total_order_of_month").css("display","none");var o=Handlebars.compile(t.settings.template.product.html());$(".tbody").append(o({product_of_month:e.data.product_of_month,carts_order:e.data.carts_order}))}else console.log("error")},error:function(){}})})},t.CancelOrder=function(){$(".submit_delete").off().on("click",function(){product_id=$(this).attr("product_id"),order_id=$(this).attr("order_id"),size_product=$(this).parent().parent().find(".size_product").find("p").get(0).innerText,$.ajax({url:t.settings.api.delete_order,headers:{Authorization:"Bearer "+t.settings.api.api_token},type:"POST",data:{token:t.settings.api.api_token,product_id:product_id,order_id:order_id,size_product:size_product},dataType:"json",success:function(e){200==e.code?window.location=check_i18n()?"/en/users/orders":"/vi/users/orders":Swal.fire({icon:"error",title:check_i18n()?e.message:"\u0110\u01a1n h\xe0ng c\u1ee7a b\u1ea1n \u0111\xe3 x\xe1c nh\u1eadn, kh\xf4ng th\u1ec3 h\u1ee7y"}).then(()=>{window.location=check_i18n()?"/en/users/orders":"/vi/users/orders"})},error:function(){}})})},t.LoadMore=function(){var e=2;$(".load_more").off().on("click",function(){$(".load_more").css("display","none"),$("#load").css("display","block"),$.ajax({url:t.settings.api.load_more_product+"?page="+e++,headers:{Authorization:"Bearer "+t.settings.api.api_token},type:"GET",dataType:"json",success:function(e){if(200==e.code){var o=Handlebars.compile(t.settings.template.more_products.html());$(".features_items").append(o({products:e.data.products}))}$(".load_more").css("display","block"),$("#load").css("display","none"),!1===e.data.show_btn_load&&$(".load_more").css("display","none")},error:function(){}})})},t.QuickView=function(){$(document).on("click",".quick_view",function(){if(!$(this).attr("product-id"))return alert("error");$(".product-details").html(""),image_url=$(this).closest(".product-image-wrapper").find(".imageProduct").attr("src"),$.ajax({url:t.settings.api.quick_review+"?productId="+$(this).attr("product-id"),headers:{Authorization:"Bearer "+t.settings.api.api_token},type:"GET",dataType:"json",success:function(e){if(200==e.code){$(".product-details").html("");var o=Handlebars.compile(t.settings.template.quick_review.html());$(".product-details").append(o({products:e.data})),$("#load").css("display","none"),$(".modal-backdrop").css("display","block"),$(".modal-content").css("display","block")}else $(".modal-backdrop").css("display","none"),$(".modal-content").css("display","none")},error:function(){$(".modal-content").css("display","none"),$(".modal-backdrop").css("display","none")}})})},t.init=function(){t.searchProduct(),t.Productofmonth(),t.CancelOrder(),t.LoadMore(),t.QuickView()}}$(document).ready(function(){product=new Product,product.init()});